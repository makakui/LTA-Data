response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
#link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
View(response)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
#GET(link, write_disk("test.zip"), overwrite = T)
read.csv("origin_destination_train_201810.csv")
data <- read.csv("origin_destination_train_201810.csv")
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
View(headers)
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
View(response)
link <- response[["value"]][[1]][["Link"]]
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
View(data)
library(tidyverse)
library(httr)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
library(tidyverse)
library(httr)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
View(response)
link <- response[["value"]][[1]][["Link"]]
link <- response[["value"]][[1]][["Link"]]
link <- response[["value"]][[1]][["Link"]]
response[["value"]][[1]][["Link"]]
response[["value"]][[1]][["Link"]]
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
View(data)
data %>%
filter(DAY_TYPE=="WEEKDAY")
data %>%
filter(DAY_TYPE=="WEEKDAY")
data %>%
filter(DAY_TYPE=="WEEKDAY") %>%
summarise(TOTAL_TRIPS)
library(tidyverse)
library(httr)
data %>%
filter(DAY_TYPE=="WEEKDAY") %>%
summarise(TOTAL_TRIPS=sum(TOTAL_TRIPS))
data %>%
filter(DAY_TYPE=="WEEKDAY")
data %>%
group_by(DAY_TYPE) %>%
summarise(sum(TOTAL_TRIPS))
data %>%
group_by(DAY_TYPE) %>%
summarise(sum(TOTAL_TRIPS/20))
data %>%
filter(DAY_TYPE=="WEEKDAY") %>%
data %>%
filter(DAY_TYPE=="WEEKDAY")
data %>%
filter(DAY_TYPE=="WEEKDAY") %>%
group_by(TIME_PER_HOUR) %>%
summarise(sum(TOTAL_TRIPS))
data %>%
filter(DAY_TYPE=="WEEKDAY") %>%
group_by(TIME_PER_HOUR) %>%
summarise(total_trips = sum(TOTAL_TRIPS))
data %>%
filter(DAY_TYPE=="WEEKDAY") %>%
group_by(TIME_PER_HOUR) %>%
summarise(total_trips = sum(TOTAL_TRIPS)) %>%
ggplot() + geom_line(aes(TIME_PER_HOUR,total_trips))
View(data)
data %>%
filter(TIME_PER_HOUR == 18)
data %>%
filter(TIME_PER_HOUR == 18, DAY_TYPE == "WEEKDAY")
data %>%
filter(TIME_PER_HOUR == 18, DAY_TYPE == "WEEKDAY") %>%
arrange(TOTAL_TRIPS)
data %>%
filter(TIME_PER_HOUR == 18, DAY_TYPE == "WEEKDAY") %>%
arrange(desc(TOTAL_TRIPS))
data %>%
filter(TIME_PER_HOUR == 18, DAY_TYPE == "WEEKDAY") %>%
arrange(desc(TOTAL_TRIPS)) %>%
select(-PT_TYPE)
library(tidyverse)
library(httr)
#account key SGVC15PDR5ebq8vu8Axutw==
#http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain
url <- "http://datamall2.mytransport.sg/ltaodataservice/PV/ODTrain"
headers <- add_headers(AccountKey = "SGVC15PDR5ebq8vu8Axutw==")
response <- GET(url, headers) %>% content()
link <- response[["value"]][[1]][["Link"]]
GET(link, write_disk("test.zip"), overwrite = T)
data %>%
filter(TIME_PER_HOUR == 18, DAY_TYPE == "WEEKDAY") %>%
arrange(desc(TOTAL_TRIPS)) %>%
select(-PT_TYPE) %>%
group_by(ORIGIN_PT_CODE) %>%
summarise(sum(TOTAL_TRIPS))
data %>%
filter(ORIGIN_PT_CODE == str_detect(DT))
data %>%
filter(str_detect(ORIGIN_PT_CODE == DT))
data %>%
filter(str_detect(DESTINATION_PT_CODE, "DT"))
data %>%
filter(str_detect(DESTINATION_PT_CODE, "DT")) %>%
group_by(DESTINATION_PT_CODE) %>%
summarise(sum(TOTAL_TRIPS)) %>%
arrange(desc(TOTAL_TRIPS))
data %>%
filter(str_detect(DESTINATION_PT_CODE, "DT")) %>%
group_by(DESTINATION_PT_CODE) %>%
summarise(sum(TOTAL_TRIPS)) %>%
arrange(desc(TOTAL_TRIPS))
data %>%
filter(str_detect(DESTINATION_PT_CODE, "DT")) %>%
group_by(DESTINATION_PT_CODE) %>%
summarise(TOTAL_TRIPS = sum(TOTAL_TRIPS)) %>%
arrange(desc(TOTAL_TRIPS))
#https://www.mytransport.sg/content/dam/datamall/datasets/Geospatial/TrainStation.zip
GET(https://www.mytransport.sg/content/dam/datamall/datasets/Geospatial/TrainStation.zip, write_disk("trainstation.zip"))
#https://www.mytransport.sg/content/dam/datamall/datasets/Geospatial/TrainStation.zip
GET("https://www.mytransport.sg/content/dam/datamall/datasets/Geospatial/TrainStation.zip", write_disk("trainstation.zip"))
unzip("trainstation.zip")
library(sf)
stations <- read_sf("TrainStation_Oct2017/MRTLRTStnPtt.shp")
plot(stations)
library(tidyverse)
library(httr)
View(data)
data %>%
filter(YEAR_MONTH != "2018-10")
View(stations)
View(stations)
View(stations)
data %>%
left_join(stations)
View(stations)
?left_join
data %>%
full_join(stations)
data %>%
left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
str_split_fixed(ORIGIN_PT_CODE, "-", 3)
data %>%
str_split_fixed(ORIGIN_PT_CODE, "-", 3)
data %>%
str_split_fixed(ORIGIN_PT_CODE, "-")
data %>%
str_split_fixed(ORIGIN_PT_CODE, "-")
data %>%
str_split(ORIGIN_PT_CODE, "-")
str_split("CC1-CC2-CC3", "-")
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE), "-")
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-"))
left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")[[1]][[1]]) %>%
select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-") %>% pluck(1) %>% pluck(1)) %>%
select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-") %>% pluck(1) %>% pluck(1)) #%>%
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-") #%>% pluck(1) %>% pluck(1)) #%>%
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")) #%>% pluck(1) %>% pluck(1)) #%>%
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")) #%>% pluck(1) %>% pluck(1)) #%>%
%>% select(ORIGIN_CLEAN)
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")) %>%#%>% pluck(1) %>% pluck(1)) #%>%
select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate((ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")) %>%
map_chr(function(X) pluck(x,1)))
data %>%
mutate((ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")) %>%
map_chr(function(x) pluck(x,1)))
?function
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate((ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-")) %>%
map_chr(function(x) pluck(x,1)))
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-") %>%
map_chr(function(x) pluck(x,1)))
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
?function
?function
?function
data <- data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-") %>%
map_chr(function(x) pluck(x,1)))
#select(ORIGIN_CLEAN)
# left_join(stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
#select(ORIGIN_CLEAN)
left_join(data,stations, by = c("ORIGIN_PT_CODE" = "STN_NO"))
data <- data %>%
mutate(ORIGIN_CLEAN = str_split(ORIGIN_PT_CODE, "-") %>%
map_chr(function(x) pluck(x,1)))
#select(ORIGIN_CLEAN)
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO"))
?map_chr
stations %>%
mutate(STN_NO = str_split(STN_NO, " / ") %>%
map_chr(function(x) pluck(x,1)))
stations %>%
mutate(STN_NO = str_split(STN_NO, " / ") %>%
map_chr(pluck(1)))
stations <- stations %>%
mutate(STN_NO = str_split(STN_NO, " / ") %>%
map_chr(pluck(1)))
stations <- stations %>%
mutate(STN_NO = str_split(STN_NO, " / ") %>%
map_chr(pluck(1))) %>%
filter(OBJECTID != 17)
left_join(data,stations)
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
View(data)
View(stations)
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
View(stations)
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
stations <- stations %>%
mutate(STN_NO= str_split(STN_NO, " / ") %>%
map_chr(pluck(1))) %>%
filter(OBJECTID != 17) #filter out amk due to duplicate
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
stations <- stations %>%
mutate(STN_NO= str_split(STN_NO, " / ") %>%
map_chr(pluck(1))) %>%
filter(OBJECTID != 17) #filter out amk due to duplicate
stations <- stations %>%
mutate(STN_NO= str_split(STN_NO, " / ") %>%
map_chr(pluck(1))) %>%
filter(OBJECTID != 17) #filter out amk due to duplicate
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
left_join(data,stations, by = c("ORIGIN_CLEAN", "STN_NO"))
st_geometry(stations) <- NULL # REMOVE geometry
library(tidyverse)
library(httr)
library(sf)
st_geometry(stations) <- NULL # REMOVE geometry
st_geometry(stations) <- NULL # REMOVE geometry
st_geometry(stations) <- NULL # REMOVE geometry
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO"))
st_geometry(stations) <- NULL # REMOVE geometry
?st_geometry
st_geometry(stations) <- NULL # REMOVE geometry
st_geometry(stations) <- NULL # REMOVE geometry
st_geometry(stations) <- NULL # REMOVE geometry
stations <- stations %>%
mutate(STN_NO= str_split(STN_NO, " / ") %>%
map_chr(pluck(1))) %>%
filter(OBJECTID != 17)  %>% #filter out amk due to duplicate
select(STN_NAME,STN_NO)
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO"))
View(stations)
library(tidyverse)
library(httr)
library(sf)
stations <- read_sf("TrainStation_Oct2017/MRTLRTStnPtt.shp")
st_geometry(stations) <- NULL # REMOVE geometry
View(stations)
stations <- stations %>%
mutate(STN_NO= str_split(STN_NO, " / ") %>%
map_chr(pluck(1))) %>%
filter(OBJECTID != 17)  %>% #filter out amk due to duplicate
select(STN_NAME,STN_NO)
?RENAME
?rename
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename("STN_NAME" = "ORIGIN_STA_NAME" )
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename("STN_NAME" = "ORIGIN_STN_NAME" )
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename(c("STN_NAME" = "ORIGIN_STN_NAME" ))
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename(c("STN_NAME" = "ORIGIN_STN_NAME" ))
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename(c("STN_NAME" = "ORIGIN_STN_NAME" ))
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename(.,c("STN_NAME" = "ORIGIN_STN_NAME" ))
left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO")) %>%
rename(c("STN_NAME" = "ORIGIN_STN_NAME" ))
?names
?colnames
data<- left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO"))
View(data)
names(data) <- c("STN_NAME", "ORIGIN_STN_NAME")
View(data)
View(data)
data
data <- read.csv("origin_destination_train_201810.csv")
View(data)
data <- data %>%
mutate(ORIGIN_CLEAN= str_split(ORIGIN_PT_CODE, "-") %>%
map_chr(pluck(1)))
data<- left_join(data,stations, by = c("ORIGIN_CLEAN" = "STN_NO"))
colnames(data)[colnames(data)=="STN_NAME"] <- "ORIGIN_STN_NAME"
data <- data %>%
mutate(DEST_CLEAN= str_split(DESTINATION_PT_CODE, "-") %>%
map_chr(pluck(1)))
data<- left_join(data,stations, by = c("DEST_CLEAN" = "STN_NO"))
colnames(data)[colnames(data)=="STN_NAME"] <- "DEST_STN_NAME"
View(data)
